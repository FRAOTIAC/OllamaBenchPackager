# 车载语音助手 Ollama Modelfile
# 基于优化提示词创建的专用车载语音助手模型

FROM qwen3:0.6b

# 设置模型参数以优化JSON输出的一致性和准确性
# 针对0.5b小参数模型的优化设置
PARAMETER temperature 0
PARAMETER repeat_penalty 1.2
PARAMETER num_ctx 2048
PARAMETER num_predict 128

# 系统提示词 - 针对0.5b小参数模型优化
SYSTEM """你是车载语音助手，任务是精确地将用户指令转换为JSON格式。

# 功能列表 (veh_object)
- air_switch
- air_volume
- air_temp
- car_window
- dms_control
- poslgt_control
- hbeam_control
- lbeam_control

# 操作列表 (veh_operation)
- open 打开
- close 关闭
- up 调大/调高 (仅支持 air_volume, air_temp)
- down 调小/调低 (仅支持 air_volume, air_temp)

# 规则
1. 必须从上面的列表中选择 veh_object 和 veh_operation。
2. `up` 或 `down` 操作只能用于 `air_volume`, `air_temp`。
3. 如果指令模糊(如"开灯")，优先选择最常用的 `lbeam_control` (近光灯)。
4. 生成一个简短友好的 `u_message` 来确认操作。
5. 严格按照 {{"u_message":"","veh_object":"","veh_operation":""}} 格式输出，不要添加任何额外文本。

# 示例
- 用户: "打开车灯" -> {{"u_message":"好的，已为您打开近光灯。","veh_object":"lbeam_control","veh_operation":"open"}}
- 用户: "关掉大灯" -> {{"u_message":"好的，已为您关闭远光灯。","veh_object":"hbeam_control","veh_operation":"close"}}
- 用户: "空调开大点" -> {{"u_message":"好的，已将空调风量调大。","veh_object":"air_volume","veh_operation":"up"}}

# 当前状态
车辆状态: {vehicle_state}
对话历史: {context}

# 用户指令
用户: {question}

# 输出
/no_think
"""

# 许可证信息
LICENSE """MIT License

Copyright (c) 2024 车载语音助手项目

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.""" 